<!DOCTYPE html>
<html>

<head>
    <title>Manage Invoices</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: #f4f6f9;
        }

        .sidebar {
            width: 220px;
            height: 100vh;
            position: fixed;
            background: linear-gradient(#0d6efd, #00c6ff);
            color: white;
            padding: 20px;
        }

        .sidebar a {
            display: block;
            color: white;
            padding: 10px;
            text-decoration: none;
        }

        .card-box {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .main {
            margin-left: 230px;
            padding: 20px;
        }
    </style>
</head>

<body>

    <div class="sidebar">
        <h4>Invoice</h4>
        <a href="dashboard.html">Dashboard</a>
        <a href="groups.html">Manage Groups</a>
        <a href="manage-chains.html">Manage Chain</a>
        <a href="brand-management.html">Manage Brands</a>
        <a href="zone-management.html">Manage SubZones</a>
        <a href="manage-estimate.html">Manage Estimate</a>
        <a href="manage-invoices.html"><b>Manage Invoices</b></a>
    </div>

    <div class="main">

        <h3>Manage Invoices</h3>
        <div class="card-box mb-3 text-center" style="background:#ff4d4d;color:white;">
            <h4>Total Invoices</h4>
            <h2 id="grandTotal">0</h2>
        </div>

        <table class="table table-bordered mt-4">
            <thead class="table-primary">
                <tr>
                    <th>#</th>
                    <th>Invoice No</th>
                    <th>Estimate ID</th>
                    <th>Chain ID</th>
                    <th>Total</th>
                    <th>Generate</th>
                </tr>
            </thead>

            <tbody id="invoiceTable"></tbody>
        </table>

    </div>

    <script>

        let estimates = JSON.parse(localStorage.getItem("estimates")) || [];

        function renderInvoices() {
            let table = document.getElementById("invoiceTable");
            table.innerHTML = "";

            estimates.forEach((e, i) => {
                table.innerHTML += `
      <tr>
        <td>${i + 1}</td>
        <td>INV-${1000 + i}</td>
        <td>${e.estimate}</td>
        <td>${e.chain}</td>
        <td>${e.total}</td>
        <td>
          <a href="generate-invoice.html?id=${i}" class="btn btn-primary btn-sm">
            Generate
          </a>
        </td>
      </tr>
    `;
            });
        }

        renderInvoices();

    </script>

</body>

</html>